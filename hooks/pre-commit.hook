#!/bin/sh
# Depends on: build-aux/checks.py
# Source: https://gitlab.gnome.org/GNOME/fractal/blob/master/hooks/pre-commit.hook

# Style helpers
act="\e[1;32m"
err="\e[1;31m"
pos="\e[32m"
neg="\e[31m"
res="\e[0m"

echo "-- Pre-commit checks --"
echo "To ignore these checks next time, run: git commit --no-verify"
echo ""
if ! build-aux/checks.py; then
    echo -e "  ${err}Aborting${res} commit"
    exit 1
fi
